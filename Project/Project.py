# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'Project.ui'
#
# Created by: PyQt5 UI code generator 5.14.2
#
# WARNING! All changes made in this file will be lost!


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(803, 609)
        MainWindow.setMinimumSize(QtCore.QSize(803, 600))
        MainWindow.setMaximumSize(QtCore.QSize(803, 600))
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        MainWindow.setFont(font)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.horizontalLayoutWidget = QtWidgets.QWidget(self.centralwidget)
        self.horizontalLayoutWidget.setGeometry(QtCore.QRect(10, 10, 781, 91))
        self.horizontalLayoutWidget.setObjectName("horizontalLayoutWidget")
        self.horizontalLayout = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget)
        self.horizontalLayout.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout.setObjectName("horizontalLayout")
        self.frame = QtWidgets.QFrame(self.horizontalLayoutWidget)
        font = QtGui.QFont()
        self.frame.setFont(font)
        self.frame.setStyleSheet("background-color: rgb(184, 184, 184);\n"
"background-color: rgb(213, 213, 213);")
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        self.label = QtWidgets.QLabel(self.frame)
        self.label.setGeometry(QtCore.QRect(10, 0, 91, 16))
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.horizontalLayoutWidget_2 = QtWidgets.QWidget(self.frame)
        self.horizontalLayoutWidget_2.setGeometry(QtCore.QRect(10, 20, 761, 51))
        self.horizontalLayoutWidget_2.setObjectName("horizontalLayoutWidget_2")
        self.horizontalLayout_2 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_2)
        self.horizontalLayout_2.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_2.setObjectName("horizontalLayout_2")
        self.label_2 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.horizontalLayout_2.addWidget(self.label_2)
        self.t1 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.t1.setFont(font)
        self.t1.setStyleSheet("\n"
"color: rgb(0, 170, 255);")
        self.t1.setObjectName("t1")
        self.horizontalLayout_2.addWidget(self.t1)
        self.label_4 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setObjectName("label_4")
        self.horizontalLayout_2.addWidget(self.label_4)
        self.t2 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.t2.setFont(font)
        self.t2.setStyleSheet("color: rgb(0, 170, 255);")
        self.t2.setObjectName("t2")
        self.horizontalLayout_2.addWidget(self.t2)
        self.label_6 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_6.setFont(font)
        self.label_6.setObjectName("label_6")
        self.horizontalLayout_2.addWidget(self.label_6)
        self.t3 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.t3.setFont(font)
        self.t3.setStyleSheet("color: rgb(0, 170, 255);")
        self.t3.setObjectName("t3")
        self.horizontalLayout_2.addWidget(self.t3)
        self.label_8 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_8.setFont(font)
        self.label_8.setObjectName("label_8")
        self.horizontalLayout_2.addWidget(self.label_8)
        self.t4 = QtWidgets.QLabel(self.horizontalLayoutWidget_2)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.t4.setFont(font)
        self.t4.setStyleSheet("color: rgb(0, 170, 255);")
        self.t4.setObjectName("t4")
        self.horizontalLayout_2.addWidget(self.t4)
        self.horizontalLayout.addWidget(self.frame)
        self.horizontalLayoutWidget_3 = QtWidgets.QWidget(self.centralwidget)
        self.horizontalLayoutWidget_3.setGeometry(QtCore.QRect(20, 110, 781, 51))
        self.horizontalLayoutWidget_3.setObjectName("horizontalLayoutWidget_3")
        self.horizontalLayout_3 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_3)
        self.horizontalLayout_3.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_3.setObjectName("horizontalLayout_3")
        self.horizontalLayout_5 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_5.setObjectName("horizontalLayout_5")
        self.label_12 = QtWidgets.QLabel(self.horizontalLayoutWidget_3)
        font = QtGui.QFont()
        font.setPointSize(8)
        font.setBold(True)
        font.setWeight(75)
        self.label_12.setFont(font)
        self.label_12.setObjectName("label_12")
        self.horizontalLayout_5.addWidget(self.label_12)
        self.t5 = QtWidgets.QLabel(self.horizontalLayoutWidget_3)
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        self.t5.setFont(font)
        self.t5.setStyleSheet("color: rgb(0, 170, 255);\n"
"")
        self.t5.setObjectName("t5")
        self.horizontalLayout_5.addWidget(self.t5)
        spacerItem = QtWidgets.QSpacerItem(150, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.horizontalLayout_5.addItem(spacerItem)
        self.horizontalLayout_3.addLayout(self.horizontalLayout_5)
        spacerItem1 = QtWidgets.QSpacerItem(100, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.horizontalLayout_3.addItem(spacerItem1)
        self.horizontalLayout_4 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_4.setObjectName("horizontalLayout_4")
        self.label_10 = QtWidgets.QLabel(self.horizontalLayoutWidget_3)
        font = QtGui.QFont()
        font.setPointSize(8)
        font.setBold(True)
        font.setWeight(75)
        self.label_10.setFont(font)
        self.label_10.setObjectName("label_10")
        self.horizontalLayout_4.addWidget(self.label_10)
        self.t6 = QtWidgets.QLabel(self.horizontalLayoutWidget_3)
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        self.t6.setFont(font)
        self.t6.setStyleSheet("color: rgb(0, 170, 255);\n"
"")
        self.t6.setObjectName("t6")
        self.horizontalLayout_4.addWidget(self.t6)
        spacerItem2 = QtWidgets.QSpacerItem(190, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.horizontalLayout_4.addItem(spacerItem2)
        self.horizontalLayout_3.addLayout(self.horizontalLayout_4)
        self.horizontalLayoutWidget_6 = QtWidgets.QWidget(self.centralwidget)
        self.horizontalLayoutWidget_6.setGeometry(QtCore.QRect(10, 170, 781, 381))
        self.horizontalLayoutWidget_6.setObjectName("horizontalLayoutWidget_6")
        self.horizontalLayout_6 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_6)
        self.horizontalLayout_6.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_6.setObjectName("horizontalLayout_6")
        self.frame_2 = QtWidgets.QFrame(self.horizontalLayoutWidget_6)
        self.frame_2.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.frame_2.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame_2.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frame_2.setObjectName("frame_2")
        self.horizontalLayoutWidget_7 = QtWidgets.QWidget(self.frame_2)
        self.horizontalLayoutWidget_7.setGeometry(QtCore.QRect(20, 10, 281, 41))
        self.horizontalLayoutWidget_7.setObjectName("horizontalLayoutWidget_7")
        self.horizontalLayout_7 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_7)
        self.horizontalLayout_7.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_7.setObjectName("horizontalLayout_7")
        self.rb1 = QtWidgets.QRadioButton(self.horizontalLayoutWidget_7)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        self.rb1.setFont(font)
        self.rb1.setObjectName("rb1")
        self.horizontalLayout_7.addWidget(self.rb1)
        self.rb2 = QtWidgets.QRadioButton(self.horizontalLayoutWidget_7)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        self.rb2.setFont(font)
        self.rb2.setObjectName("rb2")
        self.horizontalLayout_7.addWidget(self.rb2)
        self.rb3 = QtWidgets.QRadioButton(self.horizontalLayoutWidget_7)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        self.rb3.setFont(font)
        self.rb3.setObjectName("rb3")
        self.horizontalLayout_7.addWidget(self.rb3)
        self.rb4 = QtWidgets.QRadioButton(self.horizontalLayoutWidget_7)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        self.rb4.setFont(font)
        self.rb4.setObjectName("rb4")
        self.horizontalLayout_7.addWidget(self.rb4)
        self.list1 = QtWidgets.QListWidget(self.frame_2)
        self.list1.setGeometry(QtCore.QRect(25, 80, 261, 291))
        self.list1.setStyleSheet("color: rgb(0, 0, 255);")
        self.list1.setFrameShadow(QtWidgets.QFrame.Raised)
        self.list1.setObjectName("list1")
        self.horizontalLayout_6.addWidget(self.frame_2)
        spacerItem3 = QtWidgets.QSpacerItem(120, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.horizontalLayout_6.addItem(spacerItem3)
        self.frame_3 = QtWidgets.QFrame(self.horizontalLayoutWidget_6)
        self.frame_3.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.frame_3.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame_3.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frame_3.setObjectName("frame_3")
        self.horizontalLayoutWidget_8 = QtWidgets.QWidget(self.frame_3)
        self.horizontalLayoutWidget_8.setGeometry(QtCore.QRect(20, 10, 291, 41))
        self.horizontalLayoutWidget_8.setObjectName("horizontalLayoutWidget_8")
        self.horizontalLayout_8 = QtWidgets.QHBoxLayout(self.horizontalLayoutWidget_8)
        self.horizontalLayout_8.setContentsMargins(0, 0, 0, 0)
        self.horizontalLayout_8.setObjectName("horizontalLayout_8")
        spacerItem4 = QtWidgets.QSpacerItem(50, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.horizontalLayout_8.addItem(spacerItem4)
        self.label_14 = QtWidgets.QLabel(self.horizontalLayoutWidget_8)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        font.setBold(True)
        font.setWeight(75)
        self.label_14.setFont(font)
        self.label_14.setObjectName("label_14")
        self.horizontalLayout_8.addWidget(self.label_14)
        self.t7 = QtWidgets.QLineEdit(self.horizontalLayoutWidget_8)
        self.t7.setStyleSheet("color: rgb(0, 170, 255);")
        self.t7.setObjectName("t7")
        self.horizontalLayout_8.addWidget(self.t7)
        self.list2 = QtWidgets.QListWidget(self.frame_3)
        self.list2.setGeometry(QtCore.QRect(40, 80, 261, 291))
        self.list2.setStyleSheet("color: rgb(0, 0, 255);")
        self.list2.setFrameShadow(QtWidgets.QFrame.Raised)
        self.list2.setObjectName("list2")
        self.horizontalLayout_6.addWidget(self.frame_3)
        self.horizontalLayoutWidget.raise_()
        self.horizontalLayoutWidget_3.raise_()
        self.t6.raise_()
        self.horizontalLayoutWidget_6.raise_()
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 803, 23))
        self.menubar.setObjectName("menubar")
        self.menuManage_Teams = QtWidgets.QMenu(self.menubar)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        self.menuManage_Teams.setFont(font)
        self.menuManage_Teams.setObjectName("menuManage_Teams")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)
        self.actionNEW_Team = QtWidgets.QAction(MainWindow)
        font = QtGui.QFont()
        font.setFamily("Comic Sans MS")
        self.actionNEW_Team.setFont(font)
        self.actionNEW_Team.setObjectName("actionNEW_Team")
        self.actionOPEN_Team = QtWidgets.QAction(MainWindow)
        self.actionOPEN_Team.setObjectName("actionOPEN_Team")
        self.actionSAVE_Team = QtWidgets.QAction(MainWindow)
        self.actionSAVE_Team.setObjectName("actionSAVE_Team")
        self.actionEVALUATE_Team = QtWidgets.QAction(MainWindow)
        self.actionEVALUATE_Team.setObjectName("actionEVALUATE_Team")
        self.actionQuit = QtWidgets.QAction(MainWindow)
        self.actionQuit.setObjectName("actionQuit")
        self.menuManage_Teams.addAction(self.actionNEW_Team)
        self.menuManage_Teams.addAction(self.actionOPEN_Team)
        self.menuManage_Teams.addAction(self.actionSAVE_Team)
        self.menuManage_Teams.addAction(self.actionEVALUATE_Team)
        self.menuManage_Teams.addSeparator()
        self.menuManage_Teams.addAction(self.actionQuit)
        self.menubar.addAction(self.menuManage_Teams.menuAction())

        self.list1.itemDoubleClicked.connect(self.removelist1)
        self.list2.itemDoubleClicked.connect(self.removelist2)

        self.rb1.toggled.connect(self.ctg)
        self.rb2.toggled.connect(self.ctg)
        self.rb3.toggled.connect(self.ctg)
        self.rb4.toggled.connect(self.ctg)

        self.bat=0
        self.bwl=0
        self.ar=0
        self.wk=0
        self.avl=1000
        self.used=0

        self.menuManage_Teams.triggered[QtWidgets.QAction].connect(self.menu)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "FantasyCricket"))
        self.label.setText(_translate("MainWindow", "Your Selections"))
        self.label_2.setText(_translate("MainWindow", "Batsmen (BAT)"))
        self.t1.setText(_translate("MainWindow", "0"))
        self.label_4.setText(_translate("MainWindow", "Bowlers (BWL)"))
        self.t2.setText(_translate("MainWindow", "0"))
        self.label_6.setText(_translate("MainWindow", "Allrounders (AR)"))
        self.t3.setText(_translate("MainWindow", "0"))
        self.label_8.setText(_translate("MainWindow", "Wicket-keeper (WK)"))
        self.t4.setText(_translate("MainWindow", "0"))
        self.label_12.setText(_translate("MainWindow", "Points Available"))
        self.t5.setText(_translate("MainWindow", "1000"))
        self.label_10.setText(_translate("MainWindow", "Points Used"))
        self.t6.setText(_translate("MainWindow", "0"))
        self.rb1.setText(_translate("MainWindow", "BAT"))
        self.rb2.setText(_translate("MainWindow", "BWL"))
        self.rb3.setText(_translate("MainWindow", "AR"))
        self.rb4.setText(_translate("MainWindow", "WK"))
        self.label_14.setText(_translate("MainWindow", "Team Name"))
        self.menuManage_Teams.setTitle(_translate("MainWindow", "Manage Teams"))
        self.actionNEW_Team.setText(_translate("MainWindow", "NEW Team"))
        self.actionOPEN_Team.setText(_translate("MainWindow", "OPEN Team"))
        self.actionSAVE_Team.setText(_translate("MainWindow", "SAVE Team"))
        self.actionEVALUATE_Team.setText(_translate("MainWindow", "EVALUATE Team"))
        self.actionQuit.setText(_translate("MainWindow", "Quit"))

    def menu(self,action):
        txt=(action.text())

        if txt=='NEW Team':
            self.bat=0
            self.bwl=0
            self.ar=0
            self.wk=0
            self.avl=1000
            self.used=0
            self.t7.setText('')
            self.list1.clear()
            self.list2.clear()
            self.show()

        if txt=='SAVE Team':
            if self.t7.text()=='':
                from newteamdialog import Ui_Dialog
                Dialog = QtWidgets.QDialog()
                ui = Ui_Dialog()
                ui.setupUi(Dialog)
                ret=Dialog.exec()
                self.t7.setText(ui.lineEdit.text())
                print("asdfghj")
            count=self.list2.count()
            selected=""
            for i in range(count):
                selected+=self.list2.item(i).text()
                if i<count-1:
                    selected+=','
            self.saveteam(self.t7.text(),selected,self.used)

        if txt=='Quit':
            import sys
            self.showdlg("Thank You....!!!")
            sys.exit()

        if txt=='OPEN Team':
            self.bat=0
            self.bwl=0
            self.ar=0
            self.wk=0
            self.avl=1000
            self.used=0
            self.list1.clear()
            self.list2.clear()
            self.show()
            self.openteam()

        if txt=='EVALUATE Team':
            from evaluateteamdialog import Ui_Dialog
            Dialog = QtWidgets.QDialog()
            ui = Ui_Dialog()
            ui.setupUi(Dialog)
            ret=Dialog.exec()

    def openteam(self):
        import sqlite3
        cricket=sqlite3.connect("cricket.db")
        cur=cricket.cursor()
        sql="SELECT Name from teams;"
        tm=[]
        cur.execute(sql)
        while True:
            rec=cur.fetchone()
            if rec==None:
                break
            tm.append(rec[0])
        from openteamdialog import Ui_Dialog
        Dialog = QtWidgets.QDialog()
        ui = Ui_Dialog()
        ui.setupUi(Dialog)
        ret=Dialog.exec()
        self.t7.setText(ui.combo1.currentText())

        sq="SELECT Players,Value from teams WHERE Name='"+self.t7.text()+"';"
        cur.execute(sq)
        while True:
            row=cur.fetchone()
            if row==None:
                break
            txt=row[0].split(',')
            self.list2.addItems(txt)
            self.used=row[1]
            self.avl=1000-row[1]
        count=self.list2.count()

        for i in range(count):
            player=self.list2.item(i).text()
            sql="SELECT Ctg from stats WHERE Player='"+player+"';"
            cur.execute(sql)
            rec=cur.fetchone()
            ctgr=rec[0]
            if ctgr=='BAT':
                self.bat+=1
            if ctgr=='BWL':
                self.bwl+=1
            if ctgr=='AR':
                self.ar+=1
            if ctgr=='WK':
                self.wk+=1

        self.show()
            
    def show(self):
        self.t1.setText(str(self.bat))
        self.t2.setText(str(self.bwl))
        self.t3.setText(str(self.ar))
        self.t4.setText(str(self.wk))
        self.t5.setText(str(self.avl))
        self.t6.setText(str(self.used))

    def criteria(self,ctgr,item):
        msg=''
        if ctgr=="BAT" and self.bat>=5:msg="Batsmen not more than 5"
        if ctgr=="BWL" and self.bwl>=5:msg="bowlers not more than 5"
        if ctgr=="AR" and self.ar>=3:msg="Allrounders not more than 3"
        if ctgr=="WK" and self.wk>=1:msg="Wicketkeepers not more than 1"
        if msg!='':
            self.showdlg(msg)
            return False
        
        if self.avl<=0:
            msg="You Have Exhausted your Points"
            self.showdlg(msg)
            return False
        
        if ctgr=="BAT":self.bat+=1
        if ctgr=="BWL":self.bwl+=1
        if ctgr=="AR":self.ar+=1
        if ctgr=="WK":self.wk+=1

        import sqlite3
        cricket=sqlite3.connect("cricket.db")
        cur=cricket.cursor()
        sql="SELECT Value from stats WHERE Player='"+item.text()+"';"
        cur.execute(sql)
        row=cur.fetchone()
        if ((self.avl-int(row[0]))<0):
            self.showdlg('Insufficient Points!!!')
            return False
        else:
            self.avl-=int(row[0])
            self.used+=int(row[0])
            return True
    
    def removelist1(self,item):
        ctgr=''
        if self.rb1.isChecked()==True:
            ctgr='BAT'
        elif self.rb2.isChecked()==True:
            ctgr='BWL'
        elif self.rb3.isChecked()==True:
            ctgr='AR'
        elif self.rb4.isChecked()==True:
            ctgr='WK'
        ret=self.criteria(ctgr,item)

        if ret==True:
            self.list1.takeItem(self.list1.row(item))
            self.list2.addItem(item.text())
            self.show()
            
    def removelist2(self,item):
        self.list2.takeItem(self.list2.row(item))
        import sqlite3
        cricket=sqlite3.connect("cricket.db")
        cur=cricket.cursor()
        cur.execute("SELECT Player,Value,Ctg from stats WHERE Player='"+item.text()+"';")
        rec=cur.fetchone()
        self.avl=self.avl+int(rec[1])
        self.used=self.used-int(rec[1])
        ctgr=rec[2]
        if ctgr=="BAT":
            self.bat-=1
            if self.rb1.isChecked()==True:
                self.list1.addItem(item.text())
        if ctgr=="BWL":
            self.bwl-=1
            if self.rb2.isChecked()==True:
                self.list1.addItem(item.text())
        if ctgr=="AR":
            self.ar-=1
            if self.rb3.isChecked()==True:
                self.list1.addItem(item.text())
        if ctgr=="WK":
            self.wk-=1
            if self.rb4.isChecked()==True:
                self.list1.addItem(item.text())
        self.show()

    def ctg(self):
        ctgr=''
        if self.rb1.isChecked()==True:
            ctgr='BAT'
        elif self.rb2.isChecked()==True:
            ctgr='BWL'
        elif self.rb3.isChecked()==True:
            ctgr='AR'
        elif self.rb4.isChecked()==True:
            ctgr='WK'

        self.fillList(ctgr)

    def fillList(self,ctgr):
        self.list1.clear()
        import sqlite3
        cricket=sqlite3.connect("cricket.db")
        cur=cricket.cursor()
        sql="SELECT Player from stats WHERE Ctg='"+ctgr+"';"
        cur.execute(sql)
        while True:
            selected=[]
            for i in range(self.list2.count()):
                selected.append(self.list2.item(i).text())
            rec=cur.fetchone()
            if rec!=None:
                if rec[0] not in selected:
                    self.list1.addItem(rec[0])
            else:
                break

    def saveteam(self,name,player,value):
        n=self.bat+self.bwl+self.ar+self.wk
        if n<11:
            self.showdlg('Include ' + str(11-n) + ' more players to create a team ,\n i.e A cricket team has 11 players')
            return
        if n>11:
            self.showdlg('Remove' + str(n-11) + ' players to create a team ,\n i.e A cricket team only contains 11 players')
            return 
        import sqlite3
        cricket=sqlite3.connect("E:\CU\Python Training Internshala\Final Project\cricket.db")
        cur=cricket.cursor()
        tm=[]
        sql="SELECT Name from teams;"
    
        cur.execute(sql)
        while True:
            rec=cur.fetchone()
            if rec==None:
                break
            tm.append(rec[0])
    
        
        if name not in tm:
            sql="INSERT INTO teams (Name,Players,Value) VALUES ('"+name+"','"+player+"','"+str(value)+"');"
            try:
                cur.execute(sql)
                self.showdlg("Team Saved Succesfully!!!")
                cricket.commit()
            except:
                self.showdlg("Error in Operation")
                cur.rollback()
        else:
            from saveteamdialog import Ui_Dialog
            Dialog = QtWidgets.QDialog()
            ui = Ui_Dialog()
            ui.setupUi(Dialog)
            
            ui.label.setText("Team named '"+name+"' already available.")
            ui.label_2.setText("Do you want to replace it?")
            ret=Dialog.exec()
            if ui.l1.text()==("True"):
                count=self.list2.count()
                selected=""
                val=0
                for i in range(count):
                    selected+=self.list2.item(i).text()
                    if i<count-1:
                        selected+=","
                    player=self.list2.item(i).text()
                    sql="SELECT Value from stats WHERE Player='"+player+"';"
                    cur.execute(sql)
                    rec=cur.fetchone()
                    val=val+rec[0]
                sql="Update teams SET Players='"+selected+"' WHERE Name='"+name+"';"
                sq="Update teams SET Value='"+str(val)+"' WHERE Name='"+name+"';"
                try:
                    cur.execute(sql)
                    cur.execute(sq)
                    cricket.commit()
                except:
                    print("Error in Operation")
                    cricket.rollback()
            

    def showdlg(self,msg):
        #print("ecb")
        Dialog=QtWidgets.QMessageBox()
        Dialog.setText(msg)
        Dialog.setWindowTitle("FantasyCricket")
        ret=Dialog.exec()
        

if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
